{"version":3,"file":"static/chunks/pages/search-d5cb63d22665322b.js","mappings":"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","sources":["webpack://_N_E/./public/assets/svgs/icons/home.svg","webpack://_N_E/?cf11","webpack://_N_E/./actions/getSearchMovies.js","webpack://_N_E/./pages/search/index.js","webpack://_N_E/./parts/NotFound/TitleSection/index.js","webpack://_N_E/./parts/NotFound/NotFoundImage/index.js","webpack://_N_E/./parts/NotFound/index.js"],"sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M280.37 148.26L96 300.11V464a16 16 0 0016 16l112.06-.29a16 16 0 0015.92-16V368a16 16 0 0116-16h64a16 16 0 0116 16v95.64a16 16 0 0016 16.05L464 480a16 16 0 0016-16V300L295.67 148.26a12.19 12.19 0 00-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 00-12-12h-56a12 12 0 00-12 12v72.61L318.47 43a48 48 0 00-61 0L4.34 251.47a12 12 0 00-1.6 16.9l25.5 31A12 12 0 0045.15 301l235.22-193.74a12.19 12.19 0 0115.3 0L530.9 301a12 12 0 0016.9-1.6l25.5-31a12 12 0 00-1.7-16.93z\"\n});\n\nfunction SvgHome(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 576 512\"\n  }, props), _ref);\n}\n\nexport default SvgHome;","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/search\",\n      function () {\n        return require(\"private-next-pages/search/index.js\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/search\"])\n      });\n    }\n  ","\r\n\r\nimport Router from 'next/router';\r\n\r\nimport * as TYPES from './types';\r\nimport tmdbAPI from 'services/tmdbAPI';\r\nimport LINKS from 'utils/constants/links';\r\nimport { TMDB_API_VERSION } from 'config/tmdb';\r\n\r\nconst getSearchMovies = (query, page) => async dispatch => {\r\n  try {\r\n    dispatch({type: TYPES.SET_MOVIES_LOADING});\r\n    const response = await tmdbAPI.get(`/${TMDB_API_VERSION}/search/movie`, {\r\n      params: {\r\n        query,\r\n        page\r\n      }\r\n    });\r\n    await dispatch({\r\n      type: TYPES.FETCH_SEARCH_MOVIES,\r\n      payload: response.data\r\n    });\r\n    dispatch({type: TYPES.UNSET_MOVIES_LOADING});\r\n  } catch (error) {\r\n    console.log('[getSearchMovies] error => ', error);\r\n    dispatch({type: TYPES.INSERT_ERROR, payload: error.response});\r\n    Router.push(LINKS.ERROR.HREF);\r\n  }\r\n};\r\n\r\nexport default getSearchMovies;\r\n","\r\n\r\nimport { useEffect } from 'react';\r\nimport Head from 'next/head';\r\nimport Router, { useRouter } from 'next/router';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { animateScroll as scroll } from 'react-scroll';\r\n\r\nimport Header from 'parts/Header';\r\nimport PageWrapper from 'parts/PageWrapper';\r\nimport NotFound from 'parts/NotFound';\r\nimport PaddingWrapper from 'parts/PaddingWrapper';\r\nimport MovieList from 'components/MovieList';\r\nimport Loader from 'components/UI/Loader';\r\nimport getSearchMovies from 'actions/getSearchMovies';\r\nimport clearMovies from 'actions/clearMovies';\r\nimport QUERY_PARAMS from 'utils/constants/query-params';\r\nimport LINKS from 'utils/constants/links';\r\nimport checkEmptyObject from 'utils/helpers/checkEmptyObject';\r\n\r\nconst Search = () => {\r\n  const dispatch = useDispatch();\r\n  const general = useSelector(state => state.general);\r\n  const movies = useSelector(state => state.movies);\r\n  const { query } = useRouter();\r\n\r\n  const searchTerm = query[QUERY_PARAMS.SEARCH_TERM];\r\n  const page = Number(query[QUERY_PARAMS.PAGE]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      dispatch(clearMovies());\r\n    };\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    /**\r\n     * RE: https://github.com/vercel/next.js/issues/8259\r\n     * For example. https://github.com/vercel/next.js/issues/8259#issuecomment-650225962\r\n     */\r\n    if (checkEmptyObject(query)) return;\r\n\r\n    const initialSearchTerm = Router.query[QUERY_PARAMS.SEARCH_TERM];\r\n    const initialPage = Router.query[QUERY_PARAMS.PAGE];\r\n \r\n    if (!initialPage) {\r\n      const newPage = 1;\r\n      const newSearchTerm = initialSearchTerm;\r\n      console.log('[Search useEffect] query parameter update: newSearchTerm, newPage => ', newSearchTerm, newPage);\r\n      Router.replace({\r\n        pathname: LINKS.SEARCH.HREF,\r\n        query: {\r\n          [QUERY_PARAMS.SEARCH_TERM]: newSearchTerm,\r\n          [QUERY_PARAMS.PAGE]: newPage\r\n        }\r\n      });\r\n    }\r\n  }, [dispatch, query]);\r\n  \r\n  useEffect(() => {\r\n    if (!searchTerm || !page) return;\r\n\r\n    scroll.scrollToTop({smooth: true});\r\n\r\n    dispatch(getSearchMovies(searchTerm, page));\r\n  }, [searchTerm, page, dispatch]);\r\n\r\n  if (movies.loading) {\r\n    return <Loader />;\r\n  } else if (movies.total_results === 0) {\r\n    return (\r\n      <NotFound\r\n        title='Sorry!'\r\n        subtitle={`There were no results for ${searchTerm}...`} />\r\n    );\r\n  } else {\r\n    const { secure_base_url: baseUrl } = general.base.images;\r\n\r\n    return (\r\n      <PageWrapper>\r\n        <PaddingWrapper>\r\n          <Head>\r\n            <title>{`${searchTerm} - Search Results`}</title>\r\n          </Head>\r\n          <Header\r\n            title={searchTerm}\r\n            subtitle='search results' />\r\n          <MovieList\r\n            movies={movies}\r\n            baseUrl={baseUrl} />\r\n        </PaddingWrapper>\r\n      </PageWrapper>\r\n    );\r\n  }\r\n};\r\n\r\nexport default Search;\r\n","\r\n\r\nconst TitleSection = ({\r\n  theme,\r\n  title,\r\n  subtitle\r\n}) => (\r\n  <>\r\n    <div className='title-section'>\r\n      <h1 className='title'>{title}</h1>\r\n      <h2 className='subtitle'>{subtitle}</h2>\r\n    </div>\r\n    <style jsx>{`\r\n      .title-section {\r\n        text-align: center;\r\n        margin-bottom: 6rem;\r\n      }\r\n\r\n      .title-section .title {\r\n        color: var(--palette-text-primary);\r\n        font-weight: ${theme.typography.fontWeightLight};\r\n        font-size: 3.75rem;\r\n      }\r\n\r\n      .title-section .subtitle {\r\n        color: var(--palette-text-secondary);\r\n        font-weight: ${theme.typography.fontWeightBold};\r\n        font-size: 2.125rem;\r\n      }\r\n    `}</style>\r\n  </>\r\n);\r\n\r\nexport default TitleSection;\r\n","\r\nconst NotFoundImage = props => (\r\n  <>\r\n    <img\r\n      {...props}\r\n      width='423'\r\n      height='423'\r\n      className='not-found-image' />\r\n    <style jsx>{`\r\n      .not-found-image {\r\n        max-width: 96%;\r\n        height: 40vh;\r\n        margin-bottom: 6rem;\r\n      }\r\n    `}</style>\r\n  </>\r\n);\r\n\r\nexport default NotFoundImage;\r\n","\r\n\r\nimport PageWrapper from 'parts/PageWrapper';\r\nimport TitleSection from './TitleSection';\r\nimport NotFoundImage from './NotFoundImage';\r\nimport LinkButton from 'components/LinkButton';\r\nimport LINKS from 'utils/constants/links';\r\nimport withTheme from 'utils/hocs/withTheme';\r\nimport HomeIcon from 'public/assets/svgs/icons/home.svg';\r\nimport QUERY_PARAMS from 'utils/constants/query-params';\r\nimport STATIC_MOVIE_CATEGORIES from 'utils/constants/static-movie-categories';\r\n\r\nconst NotFound = ({\r\n  theme,\r\n  title,\r\n  subtitle\r\n}) => (\r\n  <>\r\n    <PageWrapper className='not-found'>\r\n      <TitleSection\r\n        theme={theme}\r\n        title={title}\r\n        subtitle={subtitle} />\r\n      <NotFoundImage\r\n        src='/assets/svgs/empty.svg'\r\n        alt='Not found!' />\r\n      <LinkButton\r\n        href={{\r\n          pathname: LINKS.HOME.HREF,\r\n          query: {\r\n            [QUERY_PARAMS.CATEGORY]: STATIC_MOVIE_CATEGORIES[0].name,\r\n            [QUERY_PARAMS.PAGE]: 1\r\n          }\r\n        }}\r\n        buttonProps={{\r\n          contained: true,\r\n          title: 'Home',\r\n          startIcon: (\r\n            <HomeIcon\r\n              fill='currentColor'\r\n              width='1.125em' />\r\n          )\r\n        }} />\r\n    </PageWrapper>\r\n    <style jsx>{`\r\n      :global(.not-found) {\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n      }\r\n      @media ${theme.mediaQueries.medium} {\r\n        :global(.not-found) {\r\n          width: 65%;\r\n        }\r\n      }\r\n    `}</style>\r\n  </>\r\n);\r\n\r\nexport default withTheme(NotFound);\r\n"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_ref","d","props","viewBox","window","__NEXT_P","push","query","page","dispatch","response","type","TYPES","tmdbAPI","TMDB_API_VERSION","params","payload","data","console","log","error","Router","LINKS","useDispatch","general","useSelector","state","movies","useRouter","searchTerm","QUERY_PARAMS","Number","useEffect","clearMovies","newSearchTerm","initialSearchTerm","pathname","smooth","getSearchMovies","subtitle","secure_base_url","title","Header","theme","div","typography","fontWeightLight","fontWeightBold","h1","h2","img","width","height","withTheme","PageWrapper","className","TitleSection","NotFoundImage","src","alt","LinkButton","href","STATIC_MOVIE_CATEGORIES","buttonProps","contained","startIcon","HomeIcon","fill","mediaQueries","medium"],"sourceRoot":""}